/* ================== THEME ================== */
:root{
  --bg:#f8fafc;--panel:#f1f5f9;--card:#fff;--pill:#fff;
  --muted:#334155;--text:#0f172a;--border:#e2e8f0;
  --ok:#10b981;--warn:#f59e0b;--err:#ef4444;--blue:#2563eb;
  --primary:#06b6d4;--primary-weak:#cffafe;
}

/* ================== BASE / RESET ================== */
*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font:18px/1.6 "Times New Roman",Times,serif;
   font-weight:700;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}
button,input,select,textarea,table{font:inherit}
table{width:100%;border-collapse:separate;border-spacing:0}
.hidden{display:none!important}
.mono{font-family:"Times New Roman",Times,serif}

/* ================== LAYOUT ================== */
.container{max-width:100%;margin:16px auto;padding:0 32px}
header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
h1{margin:0;font-weight:1000;font-size:clamp(18px,3vw,26px)}
.grid{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:10px;margin-top:10px}

/* ================== COMMON UI ================== */
.pill,.badge,.toggleRow{
  display:inline-flex;align-items:center;gap:8px;
  padding:8px 12px;border-radius:999px;
  border:1px solid var(--border);background:var(--pill);color:var(--muted);
}
.dot{width:10px;height:10px;border-radius:999px;background:#64748b}
.ok{background:var(--ok)} .warn{background:var(--warn)} .err{background:var(--err)}

.tabs{display:flex;gap:8px;flex-wrap:wrap}
.controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap}

/* ================== BUTTONS ================== */
button{
  background:var(--card);border:1px solid var(--border);color:var(--text);
  padding:8px 12px;border-radius:10px;cursor:pointer;
  box-shadow:0 1px 0 rgba(0,0,0,.08)
}
button:hover{filter:brightness(1.07)}
button.primary{background:var(--primary);color:#fff;border-color:var(--primary)}
button.danger{background:#ef4444;color:#fff;border-color:#ef4444}

.tabbtn{
  border:1px solid var(--border);background:var(--card);color:var(--text);
  padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:600
}
.tabbtn.active{background:var(--primary);color:#fff;border-color:var(--primary)}
.tabbtn.small{padding:6px 10px;font-size:17px}

.modebtn{
  border:1px solid var(--border);background:var(--card);
  padding:6px 10px;border-radius:10px;cursor:pointer
}
.modebtn.active{background:var(--blue);color:#fff;border-color:var(--blue)}

/* ================== CARD / SECTION ================== */
.card{
  background:var(--card);border:1px solid var(--border);border-radius:14px;
  overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,.15);margin-top:10px
}
.section{display:none}
.section.active{display:block}
.rfidPane{display:none}
.rfidPane.active{display:block}

.toolbar{
  display:flex;gap:10px;align-items:center;flex-wrap:wrap;
  padding:12px;border-bottom:1px solid var(--border)
}
.footer{
  display:flex;justify-content:space-between;gap:8px;flex-wrap:wrap;
  color:var(--muted);padding:10px
}

/* ================== TABLE ================== */
thead th{
  position:sticky;top:0;
  background:#f8fafc;border-bottom:1px solid var(--border);
  color:var(--muted);text-align:left
}
th,td{padding:14px 12px;border-bottom:1px solid var(--border);font-size:16px}
tbody tr:hover{background:#f1f5f9}

th.expireCol{min-width:160px}
th.stayCol{min-width:220px;width:220px;text-align:center}
td.stayCell{min-width:220px;white-space:nowrap;font-weight:700;text-align:center}
td.expireCell{
  white-space:normal;word-break:keep-all;
  font-size:13px;line-height:1.3;text-align:center;font-weight:800
}

/* ================== BADGES ================== */
.badge{font-size:18px;padding:6px 10px}
.b-in{background:rgba(16,185,129,.18);color:#16a34a;font-weight:900}
.b-out{background:rgba(239,68,68,.16);color:#dc2626;font-weight:900}
.badge.on .dot{background:var(--ok)}
.badge.off .dot{background:var(--err)}
.badge.open .dot{background:var(--warn)}
.badge.closed .dot{background:var(--ok)}

/* ================== INPUTS ================== */
input,select{
  background:var(--card);border:1px solid var(--border);color:var(--text);
  padding:8px 10px;border-radius:10px
}

/* ================== RFID STATS ================== */
.rfidStats{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:8px;padding:10px 12px;background:var(--panel);
  border-top:1px solid var(--border);border-bottom:1px solid var(--border)
}
/* ✅ Viền màu khác nhau cho từng ô (theo thứ tự hiển thị) */
.rfidStats .rfidStat{ border-width:4px; }
.rfidStats .rfidStat:nth-child(1){ border-color:#2563eb; } /* Tổng / trong kho */
.rfidStats .rfidStat:nth-child(2){ border-color:#16a34a; } /* An toàn */
.rfidStats .rfidStat:nth-child(3){ border-color:#f59e0b; } /* Cần theo dõi */
.rfidStats .rfidStat:nth-child(4){ border-color:#ef4444; } /* Sắp hết hạn */
.rfidStats .rfidStat:nth-child(5){ border-color:#06b6d4; } /* IN hôm nay */
.rfidStats .rfidStat:nth-child(6){ border-color:#0ea5e9; } /* OUT hôm nay */
.rfidStats .rfidStat:nth-child(7){ border-color:#1d4ed8; } /* Phòng 1 */
.rfidStats .rfidStat:nth-child(8){ border-color:#7c3aed; } /* Phòng 2 */
.rfidStats .rfidStat:nth-child(9){ border-color:#db2777; } /* Phòng 3 */

.rfidStat{
  background:var(--card);border:1px solid var(--border);border-radius:12px;
  padding:10px;box-shadow:0 4px 12px rgba(0,0,0,.04)
}

.rfidStatLabel{
  font-size:14px;text-transform:uppercase;letter-spacing:.06em;
  color:var(--muted);margin:0
}
.rfidStatValue{font-size:18px;font-weight:900}

/* ================== FILTER ================== */
.filterRow{
  display:flex;flex-wrap:wrap;align-items:center;gap:8px;
  padding:8px 12px;border-bottom:1px solid var(--border);background:var(--card)
}
.filterChip{
  border-radius:999px;border:1px solid var(--border);background:var(--panel);
  padding:4px 10px;font-size:16px;cursor:pointer;
  display:inline-flex;align-items:center;gap:4px;font-weight:800
}
.filterChip.active{background:var(--primary);color:#fff;border-color:var(--primary)}
.filterSwitch{
  display:inline-flex;align-items:center;gap:6px;font-size:16px;margin-left:auto
}
.filterSwitch input{margin:0}

/* ================== ROOM TABS ================== */
.roomtabs{display:flex;gap:6px;align-items:center}
.roomtabs .roombtn{
  border:1px solid var(--border);background:var(--card);
  padding:6px 10px;border-radius:10px;cursor:pointer
}
.roomtabs .roombtn.active{background:var(--blue);color:#fff;border-color:var(--blue)}

/* ================== PELTIER BAR ================== */
.peltierBar{
  display:flex;align-items:center;gap:10px;flex-wrap:wrap;
  padding:12px;border-top:1px solid var(--border)
}
.range{
  appearance:none;height:8px;border-radius:999px;background:#e5e7eb;
  outline:none;width:220px
}
.range::-webkit-slider-thumb{
  appearance:none;width:18px;height:18px;border-radius:50%;
  background:var(--primary);border:2px solid #0ea5e955;cursor:pointer
}
.range::-moz-range-thumb{
  width:18px;height:18px;border:0;border-radius:50%;
  background:var(--primary);cursor:pointer
}

/* ================== STATS CARDS (ROOM) ================== */
.stats{
  display:grid;grid-template-columns:repeat(2,minmax(0,1fr));
  gap:12px;padding:12px;border-top:1px solid var(--border)
}
.stat{
  background:var(--card);border:1px solid var(--border);border-radius:14px;
  padding:16px;text-align:center;box-shadow:0 8px 24px rgba(0,0,0,.08)
}
.statLabel{font-size:20px;font-weight:700;letter-spacing:.02em;text-transform:uppercase;color:var(--muted)}
.statValue,.statUnit{display:inline-block;vertical-align:baseline;font-weight:900;line-height:1;font-size:clamp(20px,5vw,40px);
}.statUnit{margin-left:6px;font-size:1.85em;
}

/* ================== LED ================== */
.led{
  width:14px;height:14px;border-radius:50%;
  background:#9ca3af;border:1px solid var(--border);
  box-shadow:inset 0 -1px 3px rgba(0,0,0,.25)
}
.led.red{
  background:#ef4444;
  box-shadow:0 0 0 4px rgba(239,68,68,.12),0 0 10px rgba(239,68,68,.6)
}
@keyframes pulse{
  0%{box-shadow:0 0 0 0 rgba(239,68,68,.7)}
  70%{box-shadow:0 0 0 8px rgba(239,68,68,0)}
  100%{box-shadow:0 0 0 0 rgba(239,68,68,0)}
}
.led.pulse{animation:pulse 1s infinite}

/* ================== BAND / AUTO UI ================== */
.bandWrap,.autoWrap{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.bandWrap input{width:80px}
.autoWrap input[type="number"]{width:80px}
.bandTag,.autoHint{font-size:20px;color:var(--muted);font-weight:800}
.bandTag{font-weight:900}

/* ================== MODAL ================== */
.modalOverlay{
  position:fixed;inset:0;background:rgba(15,23,42,.55);
  display:none;align-items:center;justify-content:center;
  z-index:9999;padding:18px
}
.modalOverlay.active{display:flex}
.modal{
  width:min(980px,100%);max-height:min(82vh,820px);
  background:var(--card);border:1px solid var(--border);border-radius:16px;
  box-shadow:0 20px 60px rgba(0,0,0,.35);
  overflow:hidden;display:flex;flex-direction:column
}
.modalHeader{
  display:flex;align-items:center;justify-content:space-between;gap:8px;
  padding:12px 14px;border-bottom:1px solid var(--border);background:#f8fafc
}
.modalTitle{font-weight:900;letter-spacing:.02em}
.modalBody{padding:10px 12px;overflow:auto}
.modalTools{
  display:flex;gap:8px;align-items:center;flex-wrap:wrap;
  padding:10px 12px;border-bottom:1px solid var(--border);background:var(--panel)
}
.modalTools .pill{padding:6px 10px}
.modalClose{
  border:1px solid var(--border);background:var(--card);
  padding:8px 10px;border-radius:10px;cursor:pointer;font-weight:800
}
.miniSwitch{display:inline-flex;align-items:center;gap:6px;font-size:13px}
.miniSwitch input{margin:0}
.tableMini th,.tableMini td{padding:10px;font-size:13px}

/* ================== TAG: HIỂN THỊ 3 PHÒNG ================== */
.tagbtn{
  border-radius:999px;border:1px solid var(--border);background:var(--panel);
  padding:6px 10px;font-size:16px;cursor:pointer;font-weight:900;
  display:inline-flex;align-items:center;gap:8px
}
.tagbtn.active{background:var(--primary);color:#fff;border-color:var(--primary)}

.allRoomsWrap{padding:12px;border-top:1px solid var(--border);background:var(--panel)}
.allRoomsGrid{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:10px
}
.roomMiniCard{
  background:var(--card);border:1px solid var(--border);border-radius:14px;
  padding:12px;box-shadow:0 8px 24px rgba(0,0,0,.06)
}
.roomMiniTitle{
  font-weight:1000;display:flex;align-items:center;justify-content:space-between;
  gap:8px;margin-bottom:6px
}
.roomMiniMeta{font-size:12px;color:var(--muted);font-weight:800}
.roomMiniVals{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:10px}
.roomMiniValBox{
  border:1px solid var(--border);border-radius:12px;padding:10px;
  background:#f8fafc;text-align:center
}
.roomMiniValLabel{
  font-size:11px;color:var(--muted);font-weight:900;
  text-transform:uppercase;letter-spacing:.06em
}
.roomMiniVal{font-size:22px;font-weight:1000;line-height:1.1;margin-top:4px}
.roomMiniValUnit{font-size:12px;font-weight:900;color:var(--muted)}

/* ================== TOGGLE ON/OFF ================== */
.toggleRow{padding:5px 10px;font-weight:800}
.toggleRow .toggleLabel{font-weight:900;color:var(--text);white-space:nowrap}

.toggle{
  --w:75px;--h:25px;--pad:5px;
  position:relative;display:inline-block;width:var(--w);height:var(--h);flex:0 0 auto;
  cursor:pointer
}
.toggle input{
  position:absolute;opacity:0;width:1px;height:1px;pointer-events:none
}
.toggle .track{
  position:absolute;inset:0;border-radius:999px;background:#b91c1c;
  box-shadow:inset 0 2px 10px rgba(0,0,0,.25);
  border:1px solid rgba(0,0,0,.08);transition:.18s ease;cursor:pointer
}
.toggle .track::after{
  content:"OFF";position:absolute;right:15px;top:50%;
  transform:translateY(-50%);
  font-weight:1000;letter-spacing:.06em;color:rgba(255,255,255,.95);
  font-size:16px;transition:.18s ease;user-select:none
}
.toggle .thumb{
  position:absolute;top:var(--pad);left:var(--pad);
  width:calc(var(--h) - (var(--pad)*2));
  height:calc(var(--h) - (var(--pad)*2));
  border-radius:50%;
  background:radial-gradient(circle at 30% 30%,#fff,#e5e7eb);
  box-shadow:0 8px 18px rgba(0,0,0,.25);
  transition:.18s ease;cursor:pointer
}
.toggle input:checked+.track{background:#16a34a}
.toggle input:checked+.track::after{content:"ON";left:20px;right:auto}
.toggle input:checked~.thumb{transform:translateX(calc(var(--w) - var(--h)))}
.toggle input:disabled+.track{filter:grayscale(.25);opacity:.55;cursor:not-allowed}
.toggle input:disabled~.thumb{opacity:.7}
